
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™ç§‘æ›¸ãƒ¬ãƒ³ã‚¿ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .status-available { background-color: #def7ec; color: #03543f; }
        .status-rented { background-color: #fde8e8; color: #9b1c1c; }
    </style>
</head>
<body class="bg-gray-50 p-4 md:p-10">

    <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-lg">
        <h1 class="text-2xl font-bold mb-6 text-gray-800">ğŸ“š æ•™ç§‘æ›¸ãƒ¬ãƒ³ã‚¿ãƒ«ç®¡ç†</h1>

        <div class="mb-6">
            <input type="text" id="searchInput" placeholder="æ•™ç§‘æ›¸åãƒ»è‘—è€…ã§æ¤œç´¢..." 
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="border-b-2 border-gray-100 text-gray-600">
                        <th class="p-3">ã‚¿ã‚¤ãƒˆãƒ«</th>
                        <th class="p-3">è‘—è€…</th>
                        <th class="p-3">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        <th class="p-3">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>
                    </tr>
                </thead>
                <tbody id="bookList">
                    </tbody>
            </table>
        </div>
    </div>

    <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg max-w-sm w-full">
            <h2 id="modalTitle" class="text-xl font-bold mb-4">äºˆç´„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <p class="text-sm text-gray-600 mb-4">æœ¬æ—¥ã‚ˆã‚Š14æ—¥é–“ãƒ¬ãƒ³ã‚¿ãƒ«ã™ã‚‹å ´åˆã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p>
            <div class="bg-blue-50 p-4 rounded-md mb-4">
                <p class="text-sm">è¿”å´äºˆå®šæ—¥: <span id="returnDate" class="font-bold"></span></p>
            </div>
            <div class="flex justify-end gap-2">
                <button onclick="closeModal()" class="px-4 py-2 text-gray-500">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button onclick="confirmRental()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">ç¢ºå®šã™ã‚‹</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
        const books = [
            { id: 1, title: "çµŒæ¸ˆå­¦åŸºç¤ I", author: "ä½è—¤ å¥äºŒ", status: "available" },
            { id: 2, title: "JavaScriptå…¥é–€", author: "ç”°ä¸­ å¤ªéƒ", status: "rented" },
            { id: 3, title: "ç·šå½¢ä»£æ•°ã¨å¹¾ä½•", author: "éˆ´æœ¨ ä¸€éƒ", status: "available" },
            { id: 4, title: "ãƒ¢ãƒ€ãƒ³Webãƒ‡ã‚¶ã‚¤ãƒ³", author: "å±±ç”° èŠ±å­", status: "available" },
            { id: 5, title: "ãƒã‚¯ãƒ­çµŒæ¸ˆå­¦", author: "ä½è—¤ å¥äºŒ", status: "rented" }
        ];

        let selectedBookId = null;

        // ãƒªã‚¹ãƒˆæç”»
        function renderBooks(filter = "") {
            const list = document.getElementById('bookList');
            list.innerHTML = "";

            const filtered = books.filter(b => 
                b.title.includes(filter) || b.author.includes(filter)
            );

            filtered.forEach(book => {
                const isAvail = book.status === 'available';
                const row = document.createElement('tr');
                row.className = "border-b border-gray-50 hover:bg-gray-50 transition";
                row.innerHTML = `
                    <td class="p-3 font-medium">${book.title}</td>
                    <td class="p-3 text-gray-600">${book.author}</td>
                    <td class="p-3">
                        <span class="px-2 py-1 rounded-full text-xs font-bold ${isAvail ? 'status-available' : 'status-rented'}">
                            ${isAvail ? 'â— è²¸ã—å‡ºã—å¯èƒ½' : 'â–  ãƒ¬ãƒ³ã‚¿ãƒ«ä¸­'}
                        </span>
                    </td>
                    <td class="p-3">
                        <button onclick="openModal(${book.id})" 
                            ${!isAvail ? 'disabled' : ''}
                            class="px-3 py-1 rounded text-sm transition ${isAvail ? 'bg-blue-100 text-blue-700 hover:bg-blue-200' : 'bg-gray-100 text-gray-400 cursor-not-allowed'}">
                            äºˆç´„ã™ã‚‹
                        </button>
                    </td>
                `;
                list.appendChild(row);
            });
        }

        // æ¤œç´¢ã‚¤ãƒ™ãƒ³ãƒˆ
        document.getElementById('searchInput').addEventListener('input', (e) => {
            renderBooks(e.target.value);
        });

        // ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œ
        function openModal(id) {
            selectedBookId = id;
            const book = books.find(b => b.id === id);
            document.getElementById('modalTitle').innerText = `${book.title} ã®äºˆç´„`;
            
            // è¿”å´äºˆå®šæ—¥ã®è¨ˆç®—ï¼ˆ14æ—¥å¾Œï¼‰
            const date = new Date();
            date.setDate(date.getDate() + 14);
            document.getElementById('returnDate').innerText = date.toLocaleDateString('ja-JP');
            
            document.getElementById('modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }

        function confirmRental() {
            const book = books.find(b => b.id === selectedBookId);
            book.status = 'rented';
            alert(`${book.title} ã®äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸã€‚`);
            closeModal();
            renderBooks();
        }

        // åˆæœŸåŒ–
        renderBooks();
    </script>
</body>
</html>
